policyDefinitions:
  cors:
    origin: "http://localhost:3000"
    methods:
      - "GET"
      - "POST"
    allowedHeaders:
      - "test-header"
      - "another-header"
  rateLimit:
    rateLimitBy: "jwt"
  jwt:
    secretOrPublicKey: "${JWT_SECRET}"
    algorithms:
      - "RS256"

endpoints:
  - path: "/todos"
    method: "GET"
    target:
      url: "https://jsonplaceholder.typicode.com/todos"
    transformedResponse:
      headers:
        test-header: "test"
    policies:
      - cors
      - rateLimit
  - path: "/todos"
    method: "POST"
    target:
      url: "https://jsonplaceholder.typicode.com/todos"
    transformedRequest:
      headers:
        Content-Type: "application/json"
    policies:
      - cors
  - path: "/giphy/trending"
    method: "GET"
    target:
      url: "https://api.giphy.com/v1/gifs/trending"
    transformedRequest:
      query:
        api_key: "${GIPHY_API_KEY}"
        limit: "1"
    policies:
      - cors
  - path: "/spotify/artist"
    method: "GET"
    target:
      url: "https://api.spotify.com/v1/artists/4Z8W4fKeB5YxbusRsdQVPb"
    transformedRequest:
      headers:
        Authorization: "Bearer ${SPOTIFY_TOKEN}"
